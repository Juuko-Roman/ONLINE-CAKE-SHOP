{% load static %}
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <title>Cake category</title>
    <link rel="stylesheet" type="text/css" href="{% static 'Assets/css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'Assets/css/font-awesome/css/font-awesome.css' %}">
    <script type="text/javascript">
        function getToken(name){
            var cookieValue=null;
            if(document.cookie && document.cookie !==''){

                //split cookie string and get all individual name=value pairs in an array
                var cookieArray=document.cookie.split(";");

                //loop through the array elements
                for(var i=0; i<cookieArray.length; i++){
                    var cookie=cookieArray[i].trim();

                    //Doesthis cookiebegin with the name we want 
                    if(cookie.substring(0,name.length+1)==(name+'=')){
                        // decode the value and return 
                        cookieValue = decodeURIComponent(cookie.substring(name.length+1));
                        break;
                    }
                }        
            }
            //return cookie value
            return cookieValue;
        }
        var csrftoken=getToken('csrftoken'); 
        
        function getCookie(name){
            //split cookie string and get all individual name=value pairs in an array
            var cookieArray=document.cookie.split(";");

            //loop through the array elements
            for(var i=0; i<cookieArray.length; i++){
                var cookiePair=cookieArray[i].split("=");

                //remove space at the begining of cookie name and compare it with the given string
                if(name==cookiePair.trim){
                    // decode the value and return 
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            //return null if not found
            return null;
        }        
        var cart=JSON.parse(getCookie('cart'));
        if(cart==undefined){
            cart={};
            console.log("Cart was created");
            document.cookie='cart='+JSON.stringify(cart)+";domaain=;path=/"
        }
    
        console.log('Cart: ',cart)        
        
    </script>
</head>
    <body>
        {% include "header.html" %}
        {% include "side_menu.html" %}
        
        <div class="slider" >
            <div class="mySlide fade" style="width: 1030px;"><img src="{% static 'Assets/images/banners/cat-banner-1.jpg' %}" width="100%" height="100%" >
                {% for categ in categ %}
                <div class="category">{{categ.name}}</div>
                {% endfor %}
            </div>
    </div>
        
        <div class="content" style="height: 80px"></div>
         
    
           <div class="content">
        <div class="productsContainer" >
            {% for product in products %}
            <div class="product">
                <div class="image"> <img src="{% static 'Assets/images/products/birthday1.jpeg' %}" width="100%" height="100%"/></div>
                <div class="image-footer">
                    <div class="name">{{product.name}}</div>
                    <div class="price" style="color: rgb(125, 217, 137)">UGX. {{product.price}}   &nbsp;&nbsp;<span style="color:#bbb"><s>UGX {{product.price}}</s></span></div>
                    <div class="rating">
                        <i class="fa fa-star" style="color: yellow"></i>
                        <i class="fa fa-star" style="color: yellow"></i>
                        <i class="fa fa-star" style="color: yellow"></i>
                        <i class="fa fa-star-half-o" style="color: yellow"></i>
                        <i class="fa fa-star-o" style="color: yellow"></i>                        
                    </div>
                    
                    <div class="likes" >
                        <i class="fa fa-thumbs-o-up" id="rating"  style="font-size: 20px" ></i><span style="font-size: 20px">  {{product.likes}} likes</span>                            
                        &nbsp; &nbsp;
                        
                    </div>
                    
                    <div class="add-to-cart"><a class="cart" data-product={{product.id}}  style="cursor: default">ADD TO CART</a></div>           
                </div>
            </div>
            {% endfor %}
            
        </div>
        
        
        
    </div>           
        
    {% include "supporters.html" %}
    {% include "footer.html" %}
        
        <script src="{% static 'Assets/Js/image-slider.js' %}" ></script>
        <script src="{% static 'Assets/Js/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'Assets/Js/myfunction.js' %}" type="text/javascript"></script>        
    </body>
</html>
